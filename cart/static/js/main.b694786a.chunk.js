(this.webpackJsonpoptimax=this.webpackJsonpoptimax||[]).push([[0],{29:function(e,t,a){e.exports=a(47)},38:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(12),o=a.n(c),i=a(9),s=a(6),l=a(14),u=function(e,t){if(void 0===e)return{products:[],loading:!1,error:!1};switch(t.type){case"START_LOADING_PRODUCTS":return{products:[],loading:!0,error:!1};case"PRODUCTS_LOADED_SUCCESSFULY":return{products:t.payload,loading:!1,error:!1};case"PRODUCTS_LOAD_FAIL":return{products:[],loading:!1,error:!0};default:return e.productsInfo}},d=a(10),m=a(21),p=function(e,t){if(void 0===e)return JSON.parse(localStorage.getItem("shoppingCart")||"[]");switch(t.type){case"ADD_PRODUCT_TO_CART":var a,r,n=t.payload,c=t.payload.product.id,o=e.shoppingCart.findIndex((function(e){return e.product.id===c})),i=e.shoppingCart[o];return i?((a=Object(m.a)({},i)).quantity+=n.quantity,a.total+=n.total,r=[].concat(Object(d.a)(e.shoppingCart.slice(0,o)),[a],Object(d.a)(e.shoppingCart.slice(o+1))),localStorage.setItem("shoppingCart",JSON.stringify(r)),r):(r=[n].concat(Object(d.a)(e.shoppingCart)),localStorage.setItem("shoppingCart",JSON.stringify(r)),r);case"CHANGE_PRODUCT_QUANTITY":var s,l,u=t.payload,p=u.productId,f=u.quantity,_=e.productsInfo.products.find((function(e){return e.id===p})),g=e.shoppingCart.findIndex((function(e){return e.product.id===p})),E=e.shoppingCart.find((function(e){return e.product.id===p}));if(!(E.quantity+f))return l=e.shoppingCart.filter((function(e){return e.product.id!==p})),localStorage.setItem("shoppingCart",JSON.stringify(l)),l;var h=_&&_.price?_.price:E.product.price;return(s=Object(m.a)({},E)).quantity+=f,s.total=(E.quantity+f)*h,l=[].concat(Object(d.a)(e.shoppingCart.slice(0,g)),[s],Object(d.a)(e.shoppingCart.slice(g+1))),localStorage.setItem("shoppingCart",JSON.stringify(l)),l;default:return e.shoppingCart}},f=function(e,t){return{productsInfo:u(e,t),shoppingCart:p(e,t)}},_=Object(l.b)(f),g=n.a.createContext(),E=g.Provider,h=g.Consumer,N=a(15),y=a(16),v=function(){function e(){Object(N.a)(this,e),this.jeans=[{id:1,name:"Levi's",description:"\u0414\u0436\u0438\u043d\u0441\u044b 501 Original Fit",imgURL:"/images/jeans_1.jpg",price:7900},{id:2,name:"Levi's",description:"\u0414\u0436\u0438\u043d\u0441\u044b 514 Straight fit",imgURL:"/images/jeans_2.jpg",price:5100},{id:3,name:"Levi's",description:"\u0414\u0436\u0438\u043d\u0441\u044b 501 Original Fit",imgURL:"/images/jeans_3.jpg",price:4500},{id:4,name:"Levi's",description:"\u0414\u0436\u0438\u043d\u0441\u044b 514 Straight fit",imgURL:"/images/jeans_4.jpg",price:7900}]}return Object(y.a)(e,[{key:"getProducts",value:function(){var e=this;return new Promise((function(t){setTimeout((function(){t(e.jeans)}),1e3)}))}}]),e}(),C=a(7),O=(a(38),Object(s.b)((function(e){return{counter:e.shoppingCart.length}}))((function(e){var t=e.counter,a=t?n.a.createElement("span",{className:"header__cart-counter"},t):null;return n.a.createElement("header",{className:"header"},n.a.createElement(i.b,{to:"/",className:"header__logo"},"Les Jeans"),n.a.createElement("div",{className:"header__actions"},n.a.createElement(i.b,{to:"/cart",className:"header__cart"},n.a.createElement("i",{className:"material-icons"},"shopping_cart"),a)))}))),b=a(27),j=a(26),S=a(28),T=(a(40),function(e){var t=e.id,a=e.name,r=e.imgURL,c=e.description,o=e.price,i=e.onProductAdded;return n.a.createElement("div",{className:"product"},n.a.createElement("div",{className:"product__image-wrapper"},n.a.createElement("img",{className:"product__image",src:r,alt:a})),n.a.createElement("div",{className:"product__description"},n.a.createElement("p",{className:"product__name"},a),n.a.createElement("p",{className:"product__additional"},c),n.a.createElement("p",{className:"product__price"},o," \u20bd")),n.a.createElement("button",{className:"product__add",onClick:function(){return i(t)}},n.a.createElement("i",{className:"material-icons"},"add")," Add to cart"))}),A=function(e){return function(t){return n.a.createElement(h,null,(function(a){return n.a.createElement(e,Object.assign({},t,{productService:a}))}))}},q=function(e,t){return function(){e({type:"START_LOADING_PRODUCTS"}),t.getProducts().then((function(t){return e(function(e){return{type:"PRODUCTS_LOADED_SUCCESSFULY",payload:e}}(t))})).catch((function(t){return e({type:"PRODUCTS_LOAD_FAIL"})}))}},D=(a(41),function(){return n.a.createElement("div",{className:"preloader"},n.a.createElement("div",{className:"lds-ripple"},n.a.createElement("div",null),n.a.createElement("div",null)))}),I=(a(42),function(e){var t=e.product,a=e.quantity,r=e.total,c=e.onClose,o=e.onIncrease,i=e.onDecrease,s=e.onAddToCart;return n.a.createElement("div",{className:"add-form__modal",onClick:function(e){return function(e){"add-form__modal"===e.target.className&&c()}(e)}},n.a.createElement("div",{className:"add-form__form"},n.a.createElement("i",{className:"add-form__close material-icons",onClick:function(){return c()}},"close"),n.a.createElement("p",{className:"add-form__heading"},"Add to cart"),n.a.createElement("div",{className:"add-form__product"},n.a.createElement("div",{className:"add-form__product-image-wrapper"},n.a.createElement("img",{className:"add-form__product-image",src:t.imgURL,alt:t.nam})),n.a.createElement("div",{className:"add-form__product-description"},n.a.createElement("p",{className:"add-from__product-name"},t.name),n.a.createElement("p",{className:"add-from__product-details"},t.description))),n.a.createElement("p",{className:"add-from__quantity"},"Quantity: \xa0",n.a.createElement("span",{className:"add-from__quantity-value"},a),n.a.createElement("button",{className:"add-form__change-quantity",onClick:function(){return o()}},n.a.createElement("i",{className:"material-icons"},"add")),n.a.createElement("button",{className:"add-form__change-quantity",onClick:function(){return i()}},n.a.createElement("i",{className:"material-icons"},"remove"))),n.a.createElement("p",{className:"add-from__total"},"Total: ",n.a.createElement("span",null,r," \u20bd")),n.a.createElement("div",{className:"add-form__footer"},n.a.createElement("button",{className:"add-from__add",onClick:function(){return s()}},"Add to cart"))))}),U=(a(43),function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(a=Object(b.a)(this,(e=Object(j.a)(t)).call.apply(e,[this].concat(n)))).state={form:{isVisible:!1,product:{},quantity:0,total:0}},a}return Object(S.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"onProductAdded",value:function(e){var t=this.props.products.find((function(t){return t.id===e}));this.setState((function(e){var a=e.form.quantity;return{form:{isVisible:!0,product:t,quantity:a+1,total:(a+1)*t.price}}}))}},{key:"onCloseForm",value:function(){this.setState((function(){return{form:{isVisible:!1,product:{},quantity:0,total:0}}}))}},{key:"updateQuantity",value:function(e){e+this.state.form.quantity?this.setState((function(t){var a=t.form;return{form:{isVisible:!0,product:a.product,quantity:e+a.quantity,total:(e+a.quantity)*a.product.price}}})):this.onCloseForm()}},{key:"onAddToCart",value:function(){var e=this.state.form,t=e.product,a=e.quantity,r=e.total;this.props.addProductToCart({product:t,quantity:a,total:r}),this.onCloseForm()}},{key:"render",value:function(){var e=this;if(this.props.loading)return n.a.createElement(D,null);var t=this.props.products,a=this.state.form.isVisible?n.a.createElement(I,Object.assign({},this.state.form,{onClose:function(){return e.onCloseForm()},onIncrease:function(){return e.updateQuantity(1)},onDecrease:function(){return e.updateQuantity(-1)},onAddToCart:function(){return e.onAddToCart()}})):null,r=t.map((function(t,a){return n.a.createElement(T,Object.assign({},t,{key:t.id,onProductAdded:function(t){return e.onProductAdded(t)}}))}));return n.a.createElement("div",{className:"product-list"},a,r)}}]),t}(r.Component)),L=A(Object(s.b)((function(e){var t=e.productsInfo;return{products:t.products,loading:t.loading,error:t.error}}),(function(e,t){var a=t.productService;return{fetchProducts:q(e,a),addProductToCart:function(t){return e({type:"ADD_PRODUCT_TO_CART",payload:t})}}}))(U)),P=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(L,null))},R=(a(44),Object(s.b)((function(e){return{orderItems:e.shoppingCart}}),(function(e){return{changeQuantity:function(t,a){e(function(e,t){return{type:"CHANGE_PRODUCT_QUANTITY",payload:{productId:e,quantity:t}}}(t,a))}}}))((function(e){var t=e.orderItems,a=e.changeQuantity,r=t.length?t.map((function(e,t){return n.a.createElement("li",{className:"order-list__order-item",key:t},n.a.createElement("div",{className:"order-item__image-wrapper"},n.a.createElement("img",{className:"order-item__image",src:e.product.imgURL,alt:""})),n.a.createElement("div",null,n.a.createElement("p",{className:"order-item__name"},e.product.name),n.a.createElement("p",{className:"order-item__description"},e.product.description),n.a.createElement("p",{className:"order-item__in-cart"},"Quantity: ",e.quantity),n.a.createElement("p",{className:"order-item__in-total"},"Total: ",e.total),n.a.createElement("div",{className:"order-item__controls"},n.a.createElement("button",{className:"order-item__change-quantity",onClick:function(){return a(e.product.id,1)}},n.a.createElement("i",{className:"material-icons order-item__add"},"add")),n.a.createElement("button",{className:"order-item__change-quantity",onClick:function(){return a(e.product.id,-1)}},n.a.createElement("i",{className:"material-icons order-item__remove"},"remove")),n.a.createElement("button",{className:"order-item__change-quantity",onClick:function(){return a(e.product.id,-e.quantity)}},n.a.createElement("i",{className:"material-icons order-item__delete"},"delete")))))})):null,c=t.length?t.reduce((function(e,t){return t.total+e}),0):0,o=c?n.a.createElement("div",{className:"order-list__total"},"\u0418\u0442\u043e\u0433\u043e: ",n.a.createElement("span",{className:"order-list__total-value"},c," \u20bd")):n.a.createElement("div",{className:"order-list__empty"},"Your cart is empty");return n.a.createElement("div",{className:"order-list"},n.a.createElement("p",{className:"order-list__heading"},"Cart"),n.a.createElement("ul",{className:"order-list__order"},r),o)}))),k=function(){return n.a.createElement("div",{className:"container"},n.a.createElement(R,null))},F=(a(45),function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement(O,null),n.a.createElement(C.c,null,n.a.createElement(C.a,{path:"/",component:P,exact:!0}),n.a.createElement(C.a,{path:"/cart",component:k})))}),w=(a(46),new v);o.a.render(n.a.createElement(s.a,{store:_},n.a.createElement(E,{value:w},n.a.createElement(i.a,null,n.a.createElement(F,null)))),document.getElementById("root"))}},[[29,1,2]]]);
//# sourceMappingURL=main.b694786a.chunk.js.map
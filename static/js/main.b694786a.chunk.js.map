{"version":3,"sources":["reducers/products-info.js","reducers/shopping-cart.js","reducers/index.js","store.js","products-context/products-context.js","services/index.js","services/productService.js","components/header/index.js","components/header/header.js","components/product/index.js","components/product/product.js","components/hoc/withProductService.js","actions/index.js","components/loader/index.js","components/loader/loader.js","components/add-form/index.js","components/add-form/add-form.js","components/product-list/product-list.js","components/product-list/index.js","components/pages/HomePage.js","components/order-list/index.js","components/order-list/order-list.js","components/pages/CartPage.js","components/app/index.js","components/app/app.js","index.js"],"names":["productsInfo","state","action","undefined","products","loading","error","type","payload","shoppingCart","JSON","parse","localStorage","getItem","newProduct","productData","productId","product","id","productIndexInCart","findIndex","productInCart","quantity","total","slice","setItem","stringify","updatedProduct","find","el","filter","price","reducer","store","createStore","React","createContext","ProductServicePrivider","Provider","ProductServiceConsumer","Consumer","ProductService","jeans","name","description","imgURL","Promise","resolve","setTimeout","Header","connect","counter","length","cartIndicator","className","to","Product","onProductAdded","src","alt","onClick","withProductService","Component","props","productService","fetchProducts","dispatch","service","getProducts","then","productsLoadedSuccessfuly","catch","Loader","AddForm","onClose","onIncrease","onDecrease","onAddToCart","e","target","onClickOnOverlay","nam","ProductList","form","isVisible","this","setState","onCloseForm","addProductToCart","updateQuantity","productList","map","idx","key","HomePage","OrderList","orderItems","changeQuantity","changeOrderProductQuantity","orderList","item","totalPrice","reduce","CartPage","App","path","component","exact","ReactDOM","render","value","document","getElementById"],"mappings":"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","file":"static/js/main.b694786a.chunk.js","sourcesContent":["const productsInfo = (state, action) => {\n\n  if (state === undefined) {\n    return {\n      products: [],\n      loading: false,\n      error: false\n    }\n  }\n\n  switch(action.type) {\n    case 'START_LOADING_PRODUCTS': {\n      return {\n        products: [],\n        loading: true,\n        error: false\n      }\n    }\n      \n    case 'PRODUCTS_LOADED_SUCCESSFULY': {\n      return {\n        products: action.payload,\n        loading: false,\n        error: false\n      }\n    }\n\n    case 'PRODUCTS_LOAD_FAIL': {\n      return {\n        products: [],\n        loading: false,\n        error: true\n      }\n    }\n\n    default:\n      return state.productsInfo\n  }\n}\n\nexport default productsInfo","const shoppingCart = (state, action) => {\n\n  if (state === undefined) {\n    return JSON.parse(localStorage.getItem('shoppingCart') || '[]')\n  }\n\n  switch(action.type) {\n\n    case 'ADD_PRODUCT_TO_CART': {\n      const productData = action.payload\n      const productId = action.payload.product.id\n      const productIndexInCart = state.shoppingCart.findIndex(({product: { id }}) => id === productId)\n      const productInCart = state.shoppingCart[productIndexInCart]\n      let newProduct, shoppingCart\n\n      if (productInCart) {\n        newProduct = {...productInCart}\n        newProduct.quantity += productData.quantity\n        newProduct.total += productData.total\n\n        shoppingCart = [\n          ...state.shoppingCart.slice(0, productIndexInCart),\n          newProduct,\n          ...state.shoppingCart.slice(productIndexInCart + 1)\n        ]\n\n        localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n        return shoppingCart\n      }\n\n      shoppingCart = [ productData, ...state.shoppingCart ]\n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n      return shoppingCart\n    }\n\n    case 'CHANGE_PRODUCT_QUANTITY': {\n      const { productId, quantity } = action.payload\n      const product = state.productsInfo.products.find(product => product.id === productId)\n      const productIndexInCart = state.shoppingCart.findIndex(({product: { id }}) => id === productId)\n      const productInCart = state.shoppingCart.find(el => el.product.id === productId)\n      let updatedProduct, shoppingCart\n\n      if (!(productInCart.quantity + quantity)) {\n        shoppingCart = state.shoppingCart.filter(el =>  el.product.id !== productId)\n\n        localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n        return shoppingCart\n      }\n\n      let price = product && product.price ? product.price : productInCart.product.price\n      updatedProduct = {...productInCart}\n      updatedProduct.quantity += quantity\n      updatedProduct.total = (productInCart.quantity + quantity) * price\n\n      shoppingCart = [\n        ...state.shoppingCart.slice(0, productIndexInCart),\n        updatedProduct,\n        ...state.shoppingCart.slice(productIndexInCart + 1)\n      ]  \n\n      localStorage.setItem('shoppingCart', JSON.stringify(shoppingCart))\n      return shoppingCart\n    }\n\n    default: \n     return state.shoppingCart\n  }\n}\n\nexport default shoppingCart","import productsInfo from './products-info'\nimport shoppingCart from './shopping-cart'\n\nconst reducer = (state, action) => ({\n  productsInfo: productsInfo(state, action),\n  shoppingCart: shoppingCart(state, action)\n})\n\nexport default reducer","import { createStore } from 'redux'\n\nimport reducer from './reducers'\n\nconst store = createStore(reducer)\n\nexport default store","import React from 'react'\n\nconst {\n  Provider: ProductServicePrivider,\n  Consumer: ProductServiceConsumer\n} = React.createContext()\n\nexport {\n  ProductServicePrivider,\n  ProductServiceConsumer\n}","import ProductService from './productService'\n\nexport default ProductService","export default class ProductService {\n\n  jeans = [\n    {\n      id: 1,\n      name: 'Levi\\'s',\n      description: 'Джинсы 501 Original Fit',\n      imgURL: '/images/jeans_1.jpg',\n      price: 7900\n    },\n    {\n      id: 2,\n      name: 'Levi\\'s',\n      description: 'Джинсы 514 Straight fit',\n      imgURL: '/images/jeans_2.jpg',\n      price: 5100\n    },\n    {\n      id: 3,\n      name: 'Levi\\'s',\n      description: 'Джинсы 501 Original Fit',\n      imgURL: '/images/jeans_3.jpg',\n      price: 4500\n    },\n    {\n      id: 4,\n      name: 'Levi\\'s',\n      description: 'Джинсы 514 Straight fit',\n      imgURL: '/images/jeans_4.jpg',\n      price: 7900\n    }\n  ]\n\n  getProducts() {\n    return new Promise(resolve => {\n      setTimeout(() => {\n        resolve(this.jeans)\n      }, 1000)\n    })\n  }\n}\n","import Header from './header'\n\nexport default Header","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport { connect } from 'react-redux'\n\nimport './header.css'\n\nexport const Header = ({ counter }) => {\n\n  const cartIndicator = counter ?\n    <span className=\"header__cart-counter\">{ counter }</span> : null\n\n  return (\n    <header className=\"header\">\n      <Link to=\"/\" className=\"header__logo\">\n          Les Jeans\n      </Link>\n      <div className=\"header__actions\">\n        <Link to=\"/cart\" className=\"header__cart\">\n          <i className=\"material-icons\">shopping_cart</i>\n          { cartIndicator }\n        </Link>\n      </div>\n    </header>\n  )\n}\n\nconst mapStateToProps = ({shoppingCart: { length }}) => ({\n  counter: length\n})\n\nexport default connect(mapStateToProps)(Header)\n\n\n    // \"@testing-library/jest-dom\": \"^4.2.4\",\n\n    // \"jest\": \"24.9.0\",\n    // \"jest-enzyme\": \"^7.1.2\",\n\n    // setupTests.js\n\n//     import Enzyme from 'enzyme'\n// import EnzymeAdapter from 'enzyme-adapter-react-16'\n\n// Enzyme.configure({\n//   adapter: new EnzymeAdapter(),\n//   disableLifecycleMethods: true\n// })","import Product from './product'\n\nexport default Product","import React from 'react'\n\nimport './product.css'\n\nconst Product = ({ id, name, imgURL, description, price, onProductAdded }) => {\n\n  return (\n    <div className=\"product\">\n      <div className=\"product__image-wrapper\">\n        <img className=\"product__image\" src={ imgURL } alt={ name }/>\n      </div>\n\n      <div className=\"product__description\">\n        <p className=\"product__name\">{ name }</p>\n        <p className=\"product__additional\">{ description }</p>\n        <p className=\"product__price\">{ price } &#8381;</p>\n      </div>\n\n      <button className=\"product__add\" onClick={ () => onProductAdded(id) }>\n        <i className=\"material-icons\">add</i> Add to cart\n      </button>\n    </div>\n  )\n}\n\nexport default Product","import React from 'react'\nimport { ProductServiceConsumer } from '../../products-context'\n\nconst withProductService = (Component) => (props) => (\n  \n  <ProductServiceConsumer>\n    {\n      (productService) => \n        <Component\n          { ...props }\n          productService={ productService } /> \n    }\n  </ProductServiceConsumer>\n)\n\nexport default withProductService\n","const startLoadingProducts = () => ({\n  type: 'START_LOADING_PRODUCTS'\n})\n\nconst productsLoadedSuccessfuly = products => ({\n  type: 'PRODUCTS_LOADED_SUCCESSFULY',\n  payload: products\n})\n\nconst productsLoadFail = () => ({\n  type: 'PRODUCTS_LOAD_FAIL'\n})\n\nconst fetchProducts = (dispatch, service) => () => {\n  dispatch(startLoadingProducts())\n  service.getProducts()\n    .then(products => dispatch(productsLoadedSuccessfuly(products)))\n    .catch(error => dispatch(productsLoadFail()))\n}\n\nconst addProductToCart = productData => ({\n  type: 'ADD_PRODUCT_TO_CART',\n  payload: productData\n})\n\nconst changeOrderProductQuantity = (productId, quantity) => ({\n  type: 'CHANGE_PRODUCT_QUANTITY',\n  payload: { productId, quantity }\n})\n\nexport {\n  startLoadingProducts,\n  productsLoadedSuccessfuly,\n  productsLoadFail,\n  fetchProducts,\n  addProductToCart,\n  changeOrderProductQuantity\n}\n","import Loader from './loader'\n\nexport default Loader","import React from 'react'\n\nimport './loader.css'\n\nconst Loader = () => {\n\n  return (\n    <div className=\"preloader\">\n      <div className=\"lds-ripple\">\n        <div></div>\n        <div></div>\n      </div>\n    </div>\n  )\n}\n\nexport default Loader","import AddForm from './add-form'\n\nexport default AddForm","import React from 'react'\n\nimport './add-form.css'\n\nconst AddForm = ({ product, quantity, total,\n                    onClose, onIncrease, onDecrease, onAddToCart }) => {\n\n  const onClickOnOverlay = (e) => {\n    if (e.target.className === 'add-form__modal') {\n      onClose()\n    }\n  }\n\n  return (\n    <div className=\"add-form__modal\" onClick={ (e) => onClickOnOverlay(e) }>\n      <div className=\"add-form__form\">\n        <i\n          className=\"add-form__close material-icons\"\n          onClick={ () => onClose() } \n        >\n          close\n        </i>\n        <p className=\"add-form__heading\">Add to cart</p>\n\n        <div className=\"add-form__product\">\n          <div className=\"add-form__product-image-wrapper\">\n            <img\n              className=\"add-form__product-image\"\n              src={ product.imgURL }\n              alt={  product.nam } />\n          </div>\n          <div className=\"add-form__product-description\">\n            <p className=\"add-from__product-name\">{ product.name }</p>\n            <p className=\"add-from__product-details\">{ product.description }</p>\n          </div>\n        </div>\n        <p className=\"add-from__quantity\">\n          Quantity: &nbsp;\n          <span className=\"add-from__quantity-value\">\n            { quantity }\n          </span>\n          <button className=\"add-form__change-quantity\" onClick={ () => onIncrease() }>\n            <i className=\"material-icons\">add</i>\n          </button>\n          <button className=\"add-form__change-quantity\" onClick={ () => onDecrease() }>\n            <i className=\"material-icons\">remove</i>\n          </button>\n        </p>\n        <p className=\"add-from__total\">\n          Total: <span>{ total } &#8381;</span>\n        </p>\n        <div className=\"add-form__footer\">\n          <button\n            className=\"add-from__add\"\n            onClick={ () => onAddToCart()}>\n            Add to cart\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default AddForm","import React, { Component } from 'react'\nimport Product from '../product'\nimport { connect } from 'react-redux'\nimport { withProductService } from '../hoc'\nimport { fetchProducts, addProductToCart } from '../../actions'\nimport Loader from '../loader'\nimport AddForm from '../add-form'\n\nimport './product-list.css'\n\nexport class ProductList extends Component {\n\n  state = {\n    form: {\n      isVisible: false,\n      product: {},\n      quantity: 0,\n      total: 0\n    }\n  }\n\n  componentDidMount() {\n    this.props.fetchProducts()\n  }\n\n  onProductAdded(id) {\n    const { products } = this.props\n    const product = products.find(product => product.id === id)\n    \n    this.setState(({form: { quantity }}) => ({\n      form: {\n        isVisible: true,\n        product: product,\n        quantity: quantity + 1,\n        total: (quantity + 1) * product.price\n      }\n    }))\n  }\n\n  onCloseForm() {\n    this.setState(() => ({\n      form : {\n        isVisible: false,\n        product: {},\n        quantity: 0,\n        total: 0\n      }\n    }))\n  }\n\n  updateQuantity(quantity) {\n    if (!(quantity + this.state.form.quantity)) {\n      this.onCloseForm()\n    } else {\n      this.setState(({ form }) => ({\n        form: {\n          isVisible: true,\n          product: form.product,\n          quantity: quantity + form.quantity,\n          total: (quantity + form.quantity) * form.product.price\n        }\n      }))\n    }\n  }\n\n  onAddToCart() {\n    const { product, quantity, total } = this.state.form\n\n    this.props.addProductToCart({\n      product, quantity, total\n    })\n    \n    this.onCloseForm()\n  }\n\n  render() {\n    if (this.props.loading) return <Loader />\n\n    const { products } = this.props\n\n    const form = this.state.form.isVisible ?\n      <AddForm\n        { ...this.state.form }\n        onClose={ () => this.onCloseForm() }\n        onIncrease={ () => this.updateQuantity(1) }\n        onDecrease={ () => this.updateQuantity(-1) }\n        onAddToCart={ () => this.onAddToCart() } /> : null\n\n    const productList = products.map((product, idx) => (\n      <Product\n        { ...product }\n        key={ product.id }\n        onProductAdded={ (id) => this.onProductAdded(id) } />\n    ))\n\n    return (\n      <div className=\"product-list\">\n        { form }\n        { productList }\n      </div>\n    )\n  }\n}\n\nconst mapStateToProps = ({ productsInfo: { products, loading, error } }) => (\n  { products, loading, error }\n)\n\nconst mapDispatchToProps = (dispatch, { productService }) => {\n  \n  return{\n    fetchProducts: fetchProducts(dispatch, productService),\n    addProductToCart: (product) => dispatch(addProductToCart(product))\n  }\n}\n\nexport default withProductService(\n  connect(mapStateToProps, mapDispatchToProps)(ProductList)\n)\n","import ProductList from './product-list'\n\nexport default ProductList","import React from 'react'\nimport ProductList from '../product-list'\n\nconst HomePage = () => {\n\n  return (\n    <div className=\"container\">\n      <ProductList />\n    </div>\n  )\n}\n\nexport default HomePage\n","import OrderList from \"./order-list\"\n\nexport default OrderList","import React from 'react'\nimport { connect } from 'react-redux'\nimport { changeOrderProductQuantity } from '../../actions'\n\nimport './order-list.css'\n\nexport const OrderList = ({ orderItems, changeQuantity }) => {\n\n  const orderList = orderItems.length ? orderItems.map((item, idx) => (\n    <li className=\"order-list__order-item\" key={ idx }>\n      <div className=\"order-item__image-wrapper\">\n        <img className=\"order-item__image\" src={item.product.imgURL} alt=\"\"/>\n      </div>\n      <div>\n        <p className=\"order-item__name\">{ item.product.name }</p>\n        <p className=\"order-item__description\">{ item.product.description }</p>\n        <p className=\"order-item__in-cart\">Quantity: { item.quantity }</p>\n        <p className=\"order-item__in-total\">Total: { item.total }</p>\n        <div className=\"order-item__controls\">\n          <button\n            className=\"order-item__change-quantity\"\n            onClick={() => changeQuantity(item.product.id, 1)}\n          >\n            <i className=\"material-icons order-item__add\">add</i>\n          </button>\n          <button\n            className=\"order-item__change-quantity\"\n            onClick={() => changeQuantity(item.product.id, -1)}\n          >\n            <i className=\"material-icons order-item__remove\">remove</i>\n          </button>\n          <button\n            className=\"order-item__change-quantity\"\n            onClick={() => changeQuantity(item.product.id, -item.quantity)}\n          >\n            <i className=\"material-icons order-item__delete\">delete</i>\n          </button>\n        </div>\n      </div>\n    </li>\n  )) : null\n\n  const totalPrice = orderItems.length ? \n    orderItems.reduce((total, item) => item.total + total, 0) : 0\n\n  const total = totalPrice ? (\n    <div className=\"order-list__total\">\n      Итого: <span className=\"order-list__total-value\">{ totalPrice } &#8381;</span>\n    </div>\n  ) : (\n    <div className=\"order-list__empty\">\n      Your cart is empty\n    </div>\n  )\n\n\n  return (\n    <div className=\"order-list\">\n      <p className=\"order-list__heading\">\n        Cart\n      </p>\n      <ul className=\"order-list__order\">\n        { orderList }\n      </ul>\n      { total }\n    </div>\n  )\n}\n\nconst mapStateToProps = ({ shoppingCart }) => ({\n  orderItems: shoppingCart\n})\n\nconst mapDispatchToProps = (dispatch) => ({\n  changeQuantity: (productId, quantity) => {\n    dispatch(changeOrderProductQuantity(productId, quantity))\n  }\n})\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderList)\n","import React from 'react'\nimport OrderList from '../order-list'\n\nconst CartPage = () => {\n\n  return (\n    <div className=\"container\">\n      <OrderList />\n    </div>\n  )\n}\n\nexport default CartPage","import App from './app'\n\nexport default App","import React from 'react'\nimport { Switch, Route } from 'react-router-dom'\nimport Header from '../header'\nimport { HomePage, CartPage } from '../pages'\n\nimport './app.css'\n\nconst App = () => {\n\n  return (\n    <>\n      <Header />\n      <Switch>\n        <Route path=\"/\" component={ HomePage } exact />\n        <Route path=\"/cart\" component={ CartPage } />\n      </Switch>\n    </>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport store from './store'\nimport { ProductServicePrivider } from './products-context'\nimport ProductService from './services'\n\nimport App from './components/app'\n\nimport './index.css'\n\nconst productService = new ProductService()\n\nReactDOM.render(\n  <Provider store={ store }>\n    <ProductServicePrivider value={ productService }>\n      <Router>\n        <App />\n      </Router>\n    </ProductServicePrivider>\n  </Provider>,\n  document.getElementById('root')\n)"],"sourceRoot":""}